"use strict";var containerAnimation=document.getElementById("containerAnimation"),explosion=document.querySelector(".explosion"),soundExplosion=document.getElementById("soundExplosion"),soundPainballShoot=document.getElementById("painball_shoot"),time=document.getElementById("time").children[0],hits=document.getElementById("hits").children[0],misses=document.getElementById("misses").children[0],targetImg=document.getElementById("targetImg"),scoreboard=document.querySelector(".scoreboard"),shoots=document.getElementById("shoots").children[0],mutedButton=document.getElementById("mutedButton"),gameOverCard=document.querySelector(".gameovercard"),buttonHowToPlay=document.querySelector(".header__howtoplay"),windosHowToPlay=document.querySelector(".header__window"),imageTargetID=GetRandomNumber(1,41);targetImg.src="../images/comp_".concat(imageTargetID,".svg");var deflectedShoot=!0,elementStates=[],startTime=0,totalmisses=0,totalhits=0,totalShots=30,maxMisses=20,gameOver=!1,viewWindowHowToPlay=!1;function CreateSquares(t){for(var e=0;e<t;e++)containerAnimation.insertAdjacentHTML("afterbegin","<div></div>");AddSizeAndStylesToSquares()}shoots.innerText=totalShots,CreateSquares(45),buttonHowToPlay.addEventListener("mousedown",function(){viewWindowHowToPlay=!viewWindowHowToPlay,windosHowToPlay.style.display=viewWindowHowToPlay?"flex":"none"}),mutedButton.children[0].addEventListener("mousedown",function(){var t=getComputedStyle(mutedButton.children[0],null).getPropertyValue("transform");console.log(t),"none"==t||"matrix(1, 0, 0, 1, 0, 0)"==t?(mutedButton.children[0].style.transform="translateX(35px)",mutedButton.children[0].style.background="rgb(34, 34, 34)",mutedButton.style.backgroundImage="url('./icons/mute.svg')",mutedButton.style.backgroundPositionX="10px",soundPainballShoot.muted=!0,soundExplosion.muted=!0):(mutedButton.children[0].style.transform="translateX(0px)",mutedButton.children[0].style.background="#db9005",mutedButton.style.backgroundImage="url('./icons/up_volume.svg')",mutedButton.style.backgroundPositionX="35px",soundPainballShoot.muted=!1,soundExplosion.muted=!1)});var bullet=document.addEventListener("mousedown",function(n){var o;222<n.clientY&&totalShots&&!gameOver&&((o=document.createElement("div")).className="bulletMark",setTimeout(function(){document.children[0].children[1].children[0].appendChild(o),o.style.left=n.clientX-o.getBoundingClientRect().width/2+"px",o.style.top=n.clientY-o.getBoundingClientRect().width/2+"px";var t=GetRandomNumber(1,9);o.style.backgroundImage="url('./images/mark_painball_".concat(t,".png')");var e=GetRandomNumber(1,360);o.style.filter="hue-rotate(".concat(e,"deg)"),deflectedShoot=!0},200),totalShots--,UpdateStats(),setTimeout(function(){document.children[0].children[1].children[0].removeChild(o)},9e3),deflectedShoot=deflectedShoot&&!(shotNumber=0),console.log(deflectedShoot)),222<n.clientY&&(soundPainballShoot.currentTime=0,soundPainballShoot.play()),totalShots||GameOver()});function AddSizeAndStylesToSquares(){for(var t=0;t<containerAnimation.childElementCount;t++){var e=GetRandomNumber(3,7),n=GetRandomNumber(5,90),o=GetRandomNumber(900,1e3),i=GetRandomNumberFloat(8,13),a=GetRandomNumberFloat(.5,8),r=GetRandomNumber(1,3),l=GetRandomNumber(1,41);containerAnimation.children[t].style.width="".concat(e,"vw"),containerAnimation.children[t].style.height="".concat(e,"vw"),containerAnimation.children[t].style.animationName="animateSquares".concat(r),containerAnimation.children[t].style.animationDuration="".concat(i,"s"),containerAnimation.children[t].style.animationTimingFunction="linear",containerAnimation.children[t].style.animationIterationCount="infinite",containerAnimation.children[t].style.animationDelay="".concat(a,"s"),containerAnimation.children[t].style.left="".concat(n,"vw"),containerAnimation.children[t].style.transform="translateY".concat(o,"px"),containerAnimation.children[t].style.backgroundImage="url('./images/comp_".concat(5<t&&t<13||25<t&&t<35?imageTargetID:l,".svg')"),containerAnimation.children[t].addEventListener("mousedown",function(t){ComponentChange(t)})}}function ParticlesExplosion(){setTimeout(function(){explosion.style.opacity=0},500),setTimeout(function(){soundExplosion.currentTime=0,soundExplosion.play(),explosion.style.opacity=1},250)}function UpdateStats(){shoots.innerText=totalShots,hits.innerText=totalhits,misses.innerText=totalmisses,30<totalShots&&(totalShots=30)}function GetRandomNumber(t,e){return Math.floor(Math.random()*(e-t)+t)}function GetRandomNumberFloat(t,e){return Math.random()*(e-t)+t}function ComponentChange(t){gameOver||(explosion.style.left=t.target.getBoundingClientRect().left+t.target.getBoundingClientRect().width/8+"px",explosion.style.top=t.target.getBoundingClientRect().top+t.target.getBoundingClientRect().width/2+"px",t.target.style.backgroundImage.replace(/^url\(|\)$|"/g,"").replace(".","")==targetImg.src.substring(targetImg.src.indexOf("/images")).replace(" ","")&&"transparent"!=t.target.style.backgroundColor?(totalhits++,ParticlesExplosion(),CountHits(!0)):(++totalmisses==maxMisses&&GameOver(),ParticlesExplosion(),CountHits(!1)),deflectedShoot=!1,setTimeout(function(){t.target.style.backgroundColor="transparent"},50),setTimeout(function(){t.target.style.top="1200px",t.target.style.boxShadow="none"},200),setTimeout(function(){explosion.style.left="-350px",UpdateStats()},400))}var shotNumber=0;function CountHits(t){t?shotNumber++:shotNumber=0,5==shotNumber&&(totalShots+=5,shotNumber=0),shotNumber%100==0&&(totalShots+=10)}for(var _loop=function(o){containerAnimation.children[o].addEventListener("animationiteration",function(){var t=GetRandomNumber(10,90),e=GetRandomNumber(1,41),n=GetRandomNumber(3,7);containerAnimation.children[o].style.opacity=1,containerAnimation.children[o].style.left="".concat(t,"vw"),containerAnimation.children[o].style.top="0px",containerAnimation.children[o].style.backgroundColor="#87dfe222",containerAnimation.children[o].style.boxShadow="-10px -10px 7px 25px #FFFFFF18  inset, -7px -1px 7px 5px #8f8f8f65 inset",containerAnimation.children[o].style.width="".concat(n,"vw"),containerAnimation.children[o].style.height="".concat(n,"vw"),containerAnimation.children[o].style.backgroundImage="url('./images/comp_".concat(5<o&&o<13||25<o&&o<33?imageTargetID:e,".svg')"),containerAnimation.children[o].style.scale=1,elementStates[o].hasCollided=!1})},index=0;index<containerAnimation.children.length;index++)_loop(index);for(var i=0;i<containerAnimation.childElementCount;i++)elementStates.push({hasCollided:!1});function GameOver(){var e,n;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(gameOver){t.next=14;break}for(soundExplosion.currentTime=0,e=0;e<containerAnimation.childElementCount;e++)containerAnimation.children[e].style.animationPlayState="paused";n=0;case 4:if(n<containerAnimation.childElementCount)return containerAnimation.children[n].style.top="1000px",containerAnimation.children[n].style.boxShadow="none",containerAnimation.children[n].style.backgroundColor="transparent",soundExplosion.play(),t.next=11,regeneratorRuntime.awrap(sleep(50));t.next=14;break;case 11:n++,t.next=4;break;case 14:gameOverCard.style.transform="translateX(0%)",gameOver=!0;case 16:case"end":return t.stop()}})}function checkCollision(){for(var t=0;t<containerAnimation.childElementCount;t++){var e,n,o=containerAnimation.children[t];elementStates[t].hasCollided||(e=o.getBoundingClientRect(),n=scoreboard.getBoundingClientRect(),e.left<n.right&&e.right>n.left&&e.top+e.height<n.bottom&&e.bottom>n.top&&(containerAnimation.children[t].style.backgroundImage.replace(/^url\(|\)$|"/g,"").replace(".","")===targetImg.src.substring(targetImg.src.indexOf("/images")).replace(" ","")&&(++totalmisses==maxMisses&&GameOver(),UpdateStats()),elementStates[t].hasCollided=!0))}requestAnimationFrame(checkCollision)}function sleep(e){return new Promise(function(t){return setTimeout(t,e)})}requestAnimationFrame(checkCollision),setInterval(function(){gameOver||(time.innerText=startTime++,startTime<10?time.innerText="000"+startTime:startTime<100?time.innerText="00"+startTime:startTime<1e3&&(time.innerText="0"+startTime))},1e3);
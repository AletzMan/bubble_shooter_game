"use strict";var containerAnimation=document.querySelector(".containeranimation"),explosion=document.querySelector(".explosion"),soundExplosion=document.getElementById("soundExplosion"),soundPainballShoot=document.getElementById("painball_shoot"),time=document.getElementById("time").children[0],hits=document.getElementById("hits").children[0],misses=document.getElementById("misses").children[0],targetImg=document.getElementById("targetImg"),scoreboard=document.querySelector(".scoreboard"),shoots=document.getElementById("shoots").children[0],mutedButton=document.getElementById("mutedButton"),gameOverCard=document.querySelector(".gameovercard"),buttonHowToPlay=document.querySelector(".header__howtoplay"),windosHowToPlay=document.querySelector(".header__window"),imageTargetID=GetRandomNumber(1,41);targetImg.src="./images/comp_".concat(imageTargetID,".svg");var deflectedShoot=!0,elementStates=[],startTime=0,totalmisses=0,totalhits=0,totalShots=30,maxMisses=20,gameOver=!1,viewWindowHowToPlay=!1;function CreateSquares(e){for(var t=0;t<e;t++)containerAnimation.insertAdjacentHTML("afterbegin","<div></div>");AddSizeAndStylesToSquares()}shoots.innerText=totalShots,CreateSquares(40),buttonHowToPlay.addEventListener("mousedown",function(){viewWindowHowToPlay=!viewWindowHowToPlay,windosHowToPlay.style.display=viewWindowHowToPlay?"flex":"none"}),mutedButton.children[0].addEventListener("mousedown",function(){var e=getComputedStyle(mutedButton.children[0],null).getPropertyValue("transform");console.log(e),"none"==e||"matrix(1, 0, 0, 1, 0, 0)"==e?(mutedButton.children[0].style.transform="translateX(35px)",mutedButton.children[0].style.background="rgb(34, 34, 34)",mutedButton.style.backgroundImage="url('./icons/mute.svg')",mutedButton.style.backgroundPositionX="10px",soundPainballShoot.muted=!0,soundExplosion.muted=!0):(mutedButton.children[0].style.transform="translateX(0px)",mutedButton.children[0].style.background="#db9005",mutedButton.style.backgroundImage="url('./icons/up_volume.svg')",mutedButton.style.backgroundPositionX="35px",soundPainballShoot.muted=!1,soundExplosion.muted=!1)});var bullet=document.addEventListener("mousedown",function(n){var o;115<n.clientY&&totalShots&&!gameOver&&((o=document.createElement("div")).className="bulletMark",setTimeout(function(){document.children[0].children[1].children[0].appendChild(o),o.style.left=n.clientX-o.getBoundingClientRect().width/2+"px",o.style.top=n.clientY-o.getBoundingClientRect().width/2+"px";var e=GetRandomNumber(1,9);o.style.backgroundImage="url('./images/mark_painball_".concat(e,".png')");var t=GetRandomNumber(1,360);o.style.filter="hue-rotate(".concat(t,"deg)"),deflectedShoot=!0},200),totalShots--,UpdateStats(),setTimeout(function(){document.children[0].children[1].children[0].removeChild(o)},9e3),deflectedShoot=deflectedShoot&&!(shotNumber=0),console.log(deflectedShoot)),115<n.clientY&&(soundPainballShoot.currentTime=0,soundPainballShoot.play()),totalShots||GameOver()});function AddSizeAndStylesToSquares(){for(var e=0;e<containerAnimation.childElementCount;e++){var t=GetRandomNumber(3,7),n=GetRandomNumber(10,85),o=GetRandomNumber(900,1e3),i=GetRandomNumberFloat(7,13),a=GetRandomNumberFloat(.5,8),r=GetRandomNumber(1,3),l=GetRandomNumber(1,41);containerAnimation.children[e].style.width="".concat(t,"vw"),containerAnimation.children[e].style.height="".concat(t,"vw"),containerAnimation.children[e].style.animationName="animateSquares".concat(r),containerAnimation.children[e].style.animationDuration="".concat(i,"s"),containerAnimation.children[e].style.animationTimingFunction="linear",containerAnimation.children[e].style.animationIterationCount="infinite",containerAnimation.children[e].style.animationDelay="".concat(a,"s"),containerAnimation.children[e].style.left="".concat(n,"vw"),containerAnimation.children[e].style.transform="translateY".concat(o,"px"),containerAnimation.children[e].style.backgroundImage="url('./images/comp_".concat(5<e&&e<13||25<e&&e<33?imageTargetID:l,".svg')"),containerAnimation.children[e].addEventListener("mousedown",function(e){ComponentChange(e)})}}function ParticlesExplosion(){setTimeout(function(){explosion.style.opacity=0},500),setTimeout(function(){soundExplosion.currentTime=0,soundExplosion.play(),explosion.style.opacity=1},250)}function UpdateStats(){shoots.innerText=totalShots,hits.innerText=totalhits,misses.innerText=totalmisses,30<totalShots&&(totalShots=30)}function GetRandomNumber(e,t){return Math.floor(Math.random()*(t-e)+e)}function GetRandomNumberFloat(e,t){return Math.random()*(t-e)+e}function ComponentChange(e){gameOver||(explosion.style.left=e.target.getBoundingClientRect().left+e.target.getBoundingClientRect().width/8+"px",explosion.style.top=e.target.getBoundingClientRect().top+e.target.getBoundingClientRect().width/2+"px",e.target.style.backgroundImage.replace(/^url\(|\)$|"/g,"").replace(".","")==targetImg.src.substring(targetImg.src.indexOf("/images")).replace(" ","")&&"transparent"!=e.target.style.backgroundColor?(totalhits++,ParticlesExplosion(),CountHits(!0)):(++totalmisses==maxMisses&&GameOver(),ParticlesExplosion(),CountHits(!1)),deflectedShoot=!1,setTimeout(function(){e.target.style.backgroundColor="transparent"},50),setTimeout(function(){e.target.style.top="1200px",e.target.style.boxShadow="none"},200),setTimeout(function(){explosion.style.left="-350px",UpdateStats()},400))}var shotNumber=0;function CountHits(e){e?shotNumber++:shotNumber=0,5==shotNumber&&(totalShots+=5,shotNumber=0),shotNumber%100==0&&(totalShots+=10)}for(var _loop=function(o){containerAnimation.children[o].addEventListener("animationiteration",function(){var e=GetRandomNumber(10,80),t=GetRandomNumber(1,41),n=GetRandomNumber(3,7);containerAnimation.children[o].style.opacity=1,containerAnimation.children[o].style.left="".concat(e,"vw"),containerAnimation.children[o].style.top="0px",containerAnimation.children[o].style.backgroundColor="#87dfe222",containerAnimation.children[o].style.boxShadow="-10px -10px 7px 25px #FFFFFF18  inset, -7px -1px 7px 5px #8f8f8f65 inset",containerAnimation.children[o].style.width="".concat(n,"vw"),containerAnimation.children[o].style.height="".concat(n,"vw"),containerAnimation.children[o].style.backgroundImage="url('./images/comp_".concat(5<o&&o<13||25<o&&o<33?imageTargetID:t,".svg')"),containerAnimation.children[o].style.scale=1,elementStates[o].hasCollided=!1})},index=0;index<containerAnimation.children.length;index++)_loop(index);for(var i=0;i<containerAnimation.childElementCount;i++)elementStates.push({hasCollided:!1});function GameOver(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(gameOver){e.next=14;break}for(soundExplosion.currentTime=0,t=0;t<containerAnimation.childElementCount;t++)containerAnimation.children[t].style.animationPlayState="paused";n=0;case 4:if(n<containerAnimation.childElementCount)return containerAnimation.children[n].style.top="1000px",containerAnimation.children[n].style.boxShadow="none",containerAnimation.children[n].style.backgroundColor="transparent",soundExplosion.play(),e.next=11,regeneratorRuntime.awrap(sleep(50));e.next=14;break;case 11:n++,e.next=4;break;case 14:gameOverCard.style.transform="translateX(0%)",gameOver=!0;case 16:case"end":return e.stop()}})}function checkCollision(){for(var e=0;e<containerAnimation.childElementCount;e++){var t,n,o=containerAnimation.children[e];elementStates[e].hasCollided||(t=o.getBoundingClientRect(),n=scoreboard.getBoundingClientRect(),t.left<n.right&&t.right>n.left&&t.top+t.height<n.bottom&&t.bottom>n.top&&(containerAnimation.children[e].style.backgroundImage.replace(/^url\(|\)$|"/g,"").replace(".","")===targetImg.src.substring(targetImg.src.indexOf("/images")).replace(" ","")&&(++totalmisses==maxMisses&&GameOver(),UpdateStats()),elementStates[e].hasCollided=!0))}requestAnimationFrame(checkCollision)}function sleep(t){return new Promise(function(e){return setTimeout(e,t)})}requestAnimationFrame(checkCollision),setInterval(function(){gameOver||(time.innerText=startTime++,startTime<10?time.innerText="000"+startTime:startTime<100?time.innerText="00"+startTime:startTime<1e3&&(time.innerText="0"+startTime))},1e3);